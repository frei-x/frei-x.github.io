!function(w,d){var body=d.body,$=d.querySelector.bind(d),$$=d.querySelectorAll.bind(d),root=$("html"),gotop=$("#gotop"),menu=$("#menu"),header=$("#header"),mask=$("#mask"),menuToggle=$("#menu-toggle"),menuOff=$("#menu-off"),loading=$("#loading"),animate=w.requestAnimationFrame,scrollSpeed=12,forEach=Array.prototype.forEach,even="ontouchstart"in w&&/Mobile|Android|iOS|iPhone|iPad|iPod|Windows Phone|KFAPWI/i.test(navigator.userAgent)?"touchstart":"click",isWX=/micromessenger/i.test(navigator.userAgent),noop=function(){},offset=function(el){var x=el.offsetLeft,y=el.offsetTop;if(el.offsetParent){var pOfs=arguments.callee(el.offsetParent);x+=pOfs.x,y+=pOfs.y}return{x:x,y:y}},rootScollTop=function(){return d.documentElement.scrollTop||d.body.scrollTop},Blog={goTop:function(end){var top=rootScollTop(),interval=arguments.length>2?arguments[1]:Math.abs(top-end)/12;top&&top>end?(w.scrollTo(0,Math.max(top-interval,0)),animate(arguments.callee.bind(this,end,interval))):end&&top<end?(w.scrollTo(0,Math.min(top+interval,end)),animate(arguments.callee.bind(this,end,interval))):this.toc.actived(end)},toggleGotop:function(top){top>w.innerHeight/2?gotop.classList.add("in"):gotop.classList.remove("in")},toggleMenu:function(flag){var main=$("#main");if(flag){if(menu.classList.remove("hide"),w.innerWidth<1241)if(mask.classList.add("in"),menu.classList.add("show"),isWX){var top=rootScollTop();main.classList.add("lock"),main.scrollTop=top}else root.classList.add("lock")}else if(menu.classList.remove("show"),mask.classList.remove("in"),isWX){var top=main.scrollTop;main.classList.remove("lock"),w.scrollTo(0,top)}else root.classList.remove("lock")},fixedHeader:function(top){top>header.clientHeight?header.classList.add("fixed"):header.classList.remove("fixed")},toc:function(){var toc=$("#post-toc");if(!toc||!toc.children.length)return{fixed:noop,actived:noop};var bannerH=$(".post-header").clientHeight,headerH=header.clientHeight,titles=$("#post-content").querySelectorAll("h1, h2, h3, h4, h5, h6");toc.querySelector('a[href="#'+titles[0].id+'"]').parentNode.classList.add("active");var tocChilds=toc.querySelectorAll(".post-toc-child");for(i=0,len=tocChilds.length;i<len;i++)tocChilds[i].classList.add("post-toc-shrink");var firstChild=toc.querySelector('a[href="#'+titles[0].id+'"]').nextElementSibling;firstChild&&(firstChild.classList.add("post-toc-expand"),firstChild.classList.remove("post-toc-shrink")),toc.classList.remove("post-toc-shrink");var handleTocActive=function(prevEle,currEle){prevEle.classList.remove("active"),currEle.classList.add("active");var siblingChilds=currEle.parentElement.querySelectorAll(".post-toc-child");for(j=0,len1=siblingChilds.length;j<len1;j++)siblingChilds[j].classList.remove("post-toc-expand"),siblingChilds[j].classList.add("post-toc-shrink");var myChild=currEle.querySelector(".post-toc-child");myChild&&(myChild.classList.remove("post-toc-shrink"),myChild.classList.add("post-toc-expand"))};return{fixed:function(top){top>=bannerH-headerH?toc.classList.add("fixed"):toc.classList.remove("fixed")},actived:function(top){for(i=0,len=titles.length;i<len;i++)if(top>offset(titles[i]).y-headerH-5){var prevListEle=toc.querySelector("li.active"),currListEle=toc.querySelector('a[href="#'+titles[i].id+'"]').parentNode;handleTocActive(prevListEle,currListEle)}top<offset(titles[0]).y&&handleTocActive(toc.querySelector("li.active"),toc.querySelector('a[href="#'+titles[0].id+'"]').parentNode)}}}(),hideOnMask:[],modal:function(target){this.$modal=$(target),this.$off=this.$modal.querySelector(".close");var _this=this;this.show=function(){mask.classList.add("in"),_this.$modal.classList.add("ready"),setTimeout(function(){_this.$modal.classList.add("in")},0)},this.onHide=noop,this.hide=function(){_this.onHide(),mask.classList.remove("in"),_this.$modal.classList.remove("in"),setTimeout(function(){_this.$modal.classList.remove("ready")},300)},this.toggle=function(){return _this.$modal.classList.contains("in")?_this.hide():_this.show()},Blog.hideOnMask.push(this.hide),this.$off&&this.$off.addEventListener(even,this.hide)},share:function(){var pageShare=$("#pageShare"),fab=$("#shareFab"),shareModal=new this.modal("#globalShare");$("#menuShare").addEventListener(even,shareModal.toggle),fab&&(fab.addEventListener(even,function(){pageShare.classList.toggle("in")},!1),d.addEventListener(even,function(e){!fab.contains(e.target)&&pageShare.classList.remove("in")},!1));var wxModal=new this.modal("#wxShare");wxModal.onHide=shareModal.hide,forEach.call($$(".wxFab"),function(el){el.addEventListener(even,wxModal.toggle)})},search:function(){var searchWrap=$("#search-wrap");function toggleSearch(){searchWrap.classList.toggle("in")}$("#search").addEventListener(even,toggleSearch)},reward:function(){var modal=new this.modal("#reward");$("#rewardBtn").addEventListener(even,modal.toggle);var $rewardToggle=$("#rewardToggle"),$rewardCode=$("#rewardCode");$rewardToggle&&$rewardToggle.addEventListener("change",function(){$rewardCode.src=this.checked?this.dataset.alipay:this.dataset.wechat})},waterfall:function(){w.innerWidth<760||forEach.call($$(".waterfall"),function(el){var childs=el.querySelectorAll(".waterfall-item"),columns=[0,0];forEach.call(childs,function(item){var i=columns[0]<=columns[1]?0:1;item.style.cssText="top:"+columns[i]+"px;left:"+(i>0?"50%":0),columns[i]+=item.offsetHeight}),el.style.height=Math.max(columns[0],columns[1])+"px",el.classList.add("in")})},tabBar:function(el){el.parentNode.parentNode.classList.toggle("expand")},page:($elements=$$(".fade, .fade-scale"),visible=!1,{loaded:function(){forEach.call($elements,function(el){el.classList.add("in")}),visible=!0},unload:function(){forEach.call($elements,function(el){el.classList.remove("in")}),visible=!1},visible:visible}),lightbox:function(){function LightBox(element){var naturalW,naturalH,imgRect,docW,docH;this.$img=element.querySelector("img"),this.$overlay=element.querySelector("overlay"),this.margin=40,this.title=this.$img.title||this.$img.alt||"",this.isZoom=!1,this.calcRect=function(){docW=body.clientWidth;var inH=(docH=body.clientHeight)-2*this.margin,w=naturalW,h=naturalH,t=this.margin,l=0,sw=w>docW?docW/w:1,sh=h>inH?inH/h:1,s=Math.min(sw,sh);return{w:w*=s,h:h*=s,t:(docH-h)/2-imgRect.top,l:(docW-w)/2-imgRect.left+this.$img.offsetLeft}},this.setImgRect=function(rect){this.$img.style.cssText="width: "+rect.w+"px; max-width: "+rect.w+"px; height:"+rect.h+"px; top: "+rect.t+"px; left: "+rect.l+"px"},this.setFrom=function(){this.setImgRect({w:imgRect.width,h:imgRect.height,t:0,l:(element.offsetWidth-imgRect.width)/2})},this.setTo=function(){this.setImgRect(this.calcRect())},this.addTitle=function(){this.title&&(this.$caption=d.createElement("div"),this.$caption.innerHTML=this.title,this.$caption.className="overlay-title",element.appendChild(this.$caption))},this.removeTitle=function(){this.$caption&&element.removeChild(this.$caption)};var _this=this;this.zoomIn=function(){naturalW=this.$img.naturalWidth||this.$img.width,naturalH=this.$img.naturalHeight||this.$img.height,imgRect=this.$img.getBoundingClientRect(),element.style.height=imgRect.height+"px",element.classList.add("ready"),this.setFrom(),this.addTitle(),this.$img.classList.add("zoom-in"),setTimeout(function(){element.classList.add("active"),_this.setTo(),_this.isZoom=!0},0)},this.zoomOut=function(){this.isZoom=!1,element.classList.remove("active"),this.$img.classList.add("zoom-in"),this.setFrom(),setTimeout(function(){_this.$img.classList.remove("zoom-in"),_this.$img.style.cssText="",_this.removeTitle(),element.classList.remove("ready"),element.removeAttribute("style")},300)},element.addEventListener("click",function(e){_this.isZoom?_this.zoomOut():"IMG"===e.target.tagName&&_this.zoomIn()}),d.addEventListener("scroll",function(){_this.isZoom&&_this.zoomOut()}),w.addEventListener("resize",function(){_this.isZoom&&_this.zoomOut()})}forEach.call($$(".img-lightbox"),function(el){new LightBox(el)})}(),loadScript:function(scripts){scripts.forEach(function(src){var s=d.createElement("script");s.src=src,s.async=!0,body.appendChild(s)})}},$elements,visible;w.addEventListener("load",function(){loading.classList.remove("active"),Blog.page.loaded(),w.lazyScripts&&w.lazyScripts.length&&Blog.loadScript(w.lazyScripts)}),w.addEventListener("DOMContentLoaded",function(){Blog.waterfall();var top=rootScollTop();Blog.toc.fixed(top),Blog.toc.actived(top),Blog.page.loaded()});var ignoreUnload=!1,$mailTarget=$('a[href^="mailto"]');$mailTarget&&$mailTarget.addEventListener(even,function(){ignoreUnload=!0}),w.addEventListener("beforeunload",function(e){ignoreUnload?ignoreUnload=!1:Blog.page.unload()}),w.addEventListener("pageshow",function(){!Blog.page.visible&&Blog.page.loaded()}),w.addEventListener("resize",function(){w.BLOG.even=even="ontouchstart"in w?"touchstart":"click",Blog.toggleMenu(),Blog.waterfall()}),gotop.addEventListener(even,function(){animate(Blog.goTop.bind(Blog,0))},!1),menuToggle.addEventListener(even,function(e){Blog.toggleMenu(!0),e.preventDefault()},!1),menuOff.addEventListener(even,function(){menu.classList.add("hide")},!1),mask.addEventListener(even,function(e){Blog.toggleMenu(),Blog.hideOnMask.forEach(function(hide){hide()}),e.preventDefault()},!1),d.addEventListener("scroll",function(){var top=rootScollTop();Blog.toggleGotop(top),Blog.fixedHeader(top),Blog.toc.fixed(top),Blog.toc.actived(top)},!1),w.BLOG.SHARE&&Blog.share(),w.BLOG.REWARD&&Blog.reward(),Blog.noop=noop,Blog.even=even,Blog.$=$,Blog.$$=$$,Object.keys(Blog).reduce(function(g,e){return g[e]=Blog[e],g},w.BLOG),w.Waves?(Waves.init(),Waves.attach(".global-share li",["waves-block"]),Waves.attach(".article-tag-list-link, #page-nav a, #page-nav span",["waves-button"])):console.error("Waves loading failed.");let pathname=location.pathname;if("/"==pathname||pathname.indexOf("archives")>-1||pathname.indexOf("categories")>-1||pathname.indexOf("tags")>-1){var oHeader=document.querySelector("div.container.fade-scale");oHeader.innerHTML="";let strHtml="",arrComtent=[{text:"为学日益，为道日损",author:"《道德经》"},{text:"每一个不曾起舞的日子,都是对生命的辜负",author:"尼采"},{text:"君子上交不谄，下交不渎",author:"《周易》"},{text:"慎终如始，则无败事",author:"《道德经》"},{text:"如果你想交一个朋友，那么就请他帮你一个忙",author:"本杰明·富兰克林"},{text:"不贪做事多，做好一件事",author:"google·吴军"},{text:"勿在浮沙筑高台",author:"侯捷"},{text:"衣沾不足惜，但使愿无违",author:"陶渊明"},{text:"高尚,是高尚者的通行证",author:"王觉仁"},{text:"把兴趣当工作是幸运,把工作当兴趣是本事",author:"未知"},{text:"生活即修行"},{text:"你努力的程度,还谈不上与人比天赋"}];setTimeout(function(){var random=Math.round(Math.random()*(arrComtent.length-1)),arrText=arrComtent[random].text.split(""),nowWordindex=0,nowText="";let timerAddWord=setInterval(function(){nowWordindex<arrText.length?(nowText+=arrText[nowWordindex],oHeader.innerHTML=`<h2>${nowText}</h2>`,nowWordindex++):clearInterval(timerAddWord)},150)},100);let boxPostTitles=document.querySelectorAll("article.article-card.archive-article");for(let item of boxPostTitles)item.addEventListener("click",function(e){window.location.href=item.querySelector("a.post-title-link").getAttribute("href")},!1)}}(window,document);